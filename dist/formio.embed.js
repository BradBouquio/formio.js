/*! For license information please see formio.embed.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Formio=t():e.Formio=t()}(self,(function(){return function(){"use strict";var e={36310:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.baseUrl=e||"https://cdn.form.io",this.overrides={},this.libs={js:"",ace:"1.4.12",bootstrap:"4.6.2",ckeditor:"19.0.0",flatpickr:"4.6.8","flatpickr-formio":"4.6.13-formio.3","font-awesome":"4.7.0",grid:"latest","moment-timezone":"latest",quill:"2.0.0-dev.3","shortcut-buttons-flatpickr":"0.4.0",uswds:"2.4.8",core:""},this.updateUrls()}getVersion(e){return this.libs[e]}setVersion(e,t){this.libs[e]=t,this.updateUrls()}setBaseUrl(e){this.baseUrl=e,this.updateUrls()}setOverrideUrl(e,t){this.overrides[e]=t,this.updateUrls()}removeOverride(e){delete this.overrides[e],this.updateUrls()}removeOverrides(){this.overrides={},this.updateUrls()}buildUrl(e,t,i){let o;return o="latest"===i||""===i?`${e}/${t}`:`${e}/${t}/${i}`,o}updateUrls(){for(const e in this.libs)e in this.overrides?this[e]=this.buildUrl(this.overrides[e],e,this.libs[e]):this[e]=this.buildUrl(this.baseUrl,e,this.libs[e])}}},3805:function(e,t,i){var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(r,s){function n(e){try{c(o.next(e))}catch(e){s(e)}}function d(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,d)}c((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Formio=void 0;const s=r(i(36310));class n{static setBaseUrl(e){return o(this,void 0,void 0,(function*(){n.baseUrl=e}))}static setProjectUrl(e){return o(this,void 0,void 0,(function*(){n.projectUrl=e}))}static debug(...e){n.config.debug&&console.log(...e)}static global(e){const t=window[e];return t&&t.proxy?null:(n.debug(`Getting global ${e}`,t),t)}static createElement(e,t,i){const o=document.createElement(e);return Object.keys(t).forEach((e=>{o.setAttribute(e,t[e])})),(i||[]).forEach((e=>{o.appendChild(n.createElement(e.tag,e.attrs,e.children))})),o}static addScript(e,t){return o(this,void 0,void 0,(function*(){return e?"string"!=typeof e&&e.length?Promise.all(e.map((e=>n.addScript(e)))):t&&n.global(t)?(n.debug(`${t} already loaded.`),Promise.resolve(n.global(t))):(n.debug("Adding Script",e),n.wrapper.appendChild(n.createElement("script",{src:e})),t?new Promise((e=>{n.debug(`Waiting to load ${t}`);const i=setInterval((()=>{n.global(t)&&(clearInterval(i),n.debug(`${t} loaded.`),e(n.global(t)))}),100)})):Promise.resolve()):Promise.resolve()}))}static addStyles(e,t=!1){return o(this,void 0,void 0,(function*(){if(!e)return;if("string"!=typeof e&&e.length)return void e.forEach((e=>n.addStyles(e)));n.debug("Adding Styles",e);const i=n.createElement("link",{rel:"stylesheet",href:e});t&&document.head.appendChild(i),n.wrapper.appendChild(n.createElement("link",{rel:"stylesheet",href:e}))}))}static submitDone(e,t){return o(this,void 0,void 0,(function*(){n.debug("Submision Complete",t);let i=n.config.redirect;if(!i&&e._form&&e._form.settings&&(e._form.settings.returnUrl||e._form.settings.redirect)&&(n.debug("Return url found in form configuration"),i=e._form.settings.returnUrl||e._form.settings.redirect),i){const o=e.formio?e.formio.formUrl:"",r=!!i.match(/\?/),s=0===i.indexOf(location.origin);i+=r?"&":"?",i+=`sub=${t._id}`,!s&&o&&(i+=`&form=${encodeURIComponent(o)}`),n.debug("Return URL",i),window.location.href=i,s&&window.location.reload()}}))}static renderForm(e,t,i){return o(this,void 0,void 0,(function*(){n.config.before&&(yield n.config.before(e,n.element,n.config)),e.license=!0,e.createForm(n.element,t,Object.assign(Object.assign({},i),{noLoader:!0})).then((t=>{n.config.submit&&(t.nosubmit=!0),n.debug("Form created",t),n.debug("Removing loader"),n.wrapper.removeChild(n.loader),n.config.submission&&(n.debug("Setting submission",n.config.submission),t.submission=n.config.submission),n.debug("Triggering embed event"),e.events.emit("formEmbedded",t),n.config.after&&(n.debug("Calling ready callback"),n.config.after(t,n.config)),t.on("submit",(i=>{if(n.debug("on('submit')",i),n.config.submit){n.debug(`Sending submission to ${n.config.submit}`);const o={"content-type":"application/json"},r=e.getToken();r&&(o["x-jwt-token"]=r),e.fetch(n.config.submit,{body:JSON.stringify(i),headers:o,method:"POST",mode:"cors"}).then((e=>e.json())).then((e=>n.submitDone(t,e)))}else n.submitDone(t,i)}))}))}))}static createForm(e,t,i){return o(this,void 0,void 0,(function*(){n.element=e,n.cdn=new s.default(n.config.cdn),n.config.libs=n.config.libs||{uswds:{fa:!0,js:`${n.cdn.uswds}/uswds.min.js`,css:`${n.cdn.uswds}/uswds.min.css`},fontawesome:{css:`${n.cdn["font-awesome"]}/css/font-awesome.min.css`},bootstrap:{css:`${n.cdn.bootstrap}/css/bootstrap.min.css`}},n.config.id=n.config.id||`formio-${Math.random().toString(36).substring(7)}`,n.wrapper=n.createElement("div",{id:`"${n.config.id}-wrapper"`}),e.parentNode.insertBefore(n.wrapper,e),e.parentNode.removeChild(e),n.wrapper.appendChild(e),yield n.addStyles(n.config.embedCSS||`${n.cdn.js}/formio.embed.css`),n.loader=n.createElement("div",{class:"formio-loader"},[{tag:"div",attrs:{class:"loader-wrapper"},children:[{tag:"div",attrs:{class:"loader text-center"}}]}]),n.wrapper.appendChild(n.loader);const o=yield n.addScript(n.config.script||`${n.cdn.js}/formio.form.min.js`,"Formio");if(o.setBaseUrl(n.baseUrl||n.config.base),o.setProjectUrl(n.projectUrl||n.config.project),o.language=n.language,n.global("premium")&&(n.debug("Using premium module."),o.use(n.global("premium"))),n.global("vpat")&&(n.debug("Using vpat module."),o.use(n.global("vpat"))),n.config.template){if(n.config.includeLibs&&(yield n.addStyles(n.config.libs[n.config.template].css),yield n.addScript(n.config.libs[n.config.template].js),n.config.libs[n.config.template].fa&&(yield n.addStyles(n.config.libs.fontawesome.css,!0))),n.cdn[n.config.template]){const e=`${n.cdn[n.config.template]}/${n.config.template}.min`;yield n.addStyles(`${e}.css`),n.debug(`Using ${n.config.template}`),o.use(yield n.addScript(`${e}.js`,n.config.template))}}else n.global("uswds")?(n.debug("Using uswds module."),o.use(n.global("uswds"))):n.config.includeLibs&&(yield n.addStyles(n.config.libs.fontawesome.css,!0),yield n.addStyles(n.config.libs.bootstrap.css));n.config.premium&&(yield n.addStyles(n.config.premium.css),n.debug("Using premium"),o.use(yield n.addScript(n.config.premium.js,"premium"))),yield n.addStyles(n.config.style||`${n.cdn.js}/formio.form.min.css`),yield n.renderForm(o,t,i)}))}}n.config={},n.loader=null,n.cdn=null,n.proxy=!0,t.Formio=n}},t={};function i(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,i),s.exports}var o={};return function(){var e=o;e.Formio=void 0;const t=i(3805);Object.defineProperty(e,"Formio",{enumerable:!0,get:function(){return t.Formio}});const r=document.getElementsByTagName("script"),s=window.FormioConfig||{};let n=null,d=r.length;const c=s.scriptName||"formio.embed.";for(;d--;)if(r[d].src&&-1!==r[d].src.indexOf(c)){n=r[d];break}if(n){const e={};n.src.replace(/^[^?]+\??/,"").replace(/\?/g,"&").split("&").forEach((t=>{e[t.split("=")[0]]=t.split("=")[1]&&decodeURIComponent(t.split("=")[1])}));let i=n.src.replace(/^([^?]+).*/,"$1").split("/");i.pop(),s.formioPath&&s.formioPath(i),i=i.join("/"),t.Formio.config=Object.assign({script:e.script||`${t.Formio.config.updatePath?t.Formio.config.updatePath():i}/formio.form.min.js`,style:e.styles||`${t.Formio.config.updatePath?t.Formio.config.updatePath():i}/formio.form.min.css`,cdn:e.cdn,class:e.class||"formio-form-wrapper",src:e.src,form:null,submission:null,project:e.project,base:e.base||"https://api.form.io",submit:e.submit,includeLibs:"true"===e.libs||"1"===e.libs,template:e.template,debug:"true"===e.debug||"1"===e.debug,config:{},redirect:e.return||e.redirect,embedCSS:`${t.Formio.config.updatePath?t.Formio.config.updatePath():i}/formio.embed.css`,before:null,after:null},s);const o=t.Formio.config.form||t.Formio.config.src;if(o){t.Formio.debug("Embedding Configuration",s),t.Formio.config.addPremiumLib&&t.Formio.config.addPremiumLib(t.Formio.config,i),t.Formio.config.id=`formio-${Math.random().toString(36).substring(7)}`,t.Formio.debug("Creating form element");const e=t.Formio.createElement("div",{id:t.Formio.config.id,class:t.Formio.config.class});n.parentNode.insertBefore(e,n.parentNode.firstElementChild.nextSibling),t.Formio.createForm(e,o,t.Formio.config.config)}}else document.write("<span>Could not locate the Embedded form.</span>")}(),o.Formio}()}));